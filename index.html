
<!DOCTYPE html>
<html>
<head>
    <title>HPP Lightbox Demo</title>
    <meta charset="UTF-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="/rxp-js.js"></script>
    <script>
      RealexHpp.setHppUrl('https://pay.sandbox.realexpayments.com/pay');
      // get the HPP JSON from the server-side SDK
      $(document).ready(function () {
        $.getJSON("http://localhost:3000/get-hpp-charge", function (jsonFromServerSdk) {
          console.log('jsonFromServerSdk', jsonFromServerSdk)
          // RealexHpp.embedded.init(
          //   "payButtonId",
          //   "targetIframe",
          //   "http://localhost:3000/response-hpp",
          //   jsonFromServerSdk
          // );
          $('input[name="TIMESTAMP"]').val(jsonFromServerSdk.TIMESTAMP)
          $('input[name="MERCHANT_ID"]').val(jsonFromServerSdk.MERCHANT_ID)
          $('input[name="ACCOUNT"]').val(jsonFromServerSdk.ACCOUNT)
          $('input[name="ORDER_ID"]').val(jsonFromServerSdk.ORDER_ID)
          $('input[name="AMOUNT"]').val(jsonFromServerSdk.AMOUNT)
          $('input[name="CURRENCY"]').val(jsonFromServerSdk.CURRENCY)
          $('input[name="VAR_REF"]').val(jsonFromServerSdk.VAR_REF)
          $('input[name="AUTO_SETTLE_FLAG"]').val(jsonFromServerSdk.AUTO_SETTLE_FLAG)
          $('input[name="SHA1HASH"]').val(jsonFromServerSdk.SHA1HASH)
          $('input[name="SHA1HASH"]').val(jsonFromServerSdk.SHA1HASH)
          $('body').addClass('loaded');
          $("#payButtonId").trigger("click");
        });
        // $.getJSON("/get-hpp-authorize", function (jsonFromServerSdk) {
        //   console.log('jsonFromServerSdk', jsonFromServerSdk)
        //   RealexHpp.embedded.init(
        //     "payButtonId2",
        //     "targetIframe",
        //     "http://localhost:3000/authorize-case",
        //     jsonFromServerSdk
        //   );
        //   $('body').addClass('loaded');
        // });
      });
      // $(document).ready(function() {
      //   $.getJSON("/get-json", function(jsonFromRequestEndpoint) {
      //     RealexHpp.setHppUrl("https://pay.sandbox.realexpayments.com/pay");
      //     RealexHpp.lightbox.init("payButtonId", "http://localhost:3000/", jsonFromRequestEndpoint);
      //   });
      // });

    </script>
</head>
<body>
<!--<input type="submit" style="display: none" id="payButtonId" value="Checkout Now" />-->
<br />
<form action="https://pay.sandbox.realexpayments.com/pay" method="POST" target="iframe">
  <input type="hidden" name="TIMESTAMP" value="20180614095601">
  <input type="hidden" name="MERCHANT_ID" value="Quantatest">
  <input type="hidden" name="ACCOUNT" value="internet">
  <input type="hidden" name="ORDER_ID" value="N6qsk4kYRZihmPrTXWYS6g">
  <input type="hidden" name="AMOUNT" value="1001">
  <input type="hidden" name="CURRENCY" value="GPD">
  <input type="hidden" name="VAR_REF" value="Invoice 7564a">
  <input type="hidden" name="COMMENT1" value="New Subscription">
  <input type="hidden" name="AUTO_SETTLE_FLAG" value="1">
  <input type="hidden" name="HPP_VERSION" value="2">
  <input type="hidden" name="MERCHANT_RESPONSE_URL" value="https://localhost:3000/charge-case">
  <!-- PayPal Specific Fields-->
  <input type="hidden" name="SHIPPING_ADDRESS_ENABLE" value="1">
  <input type="hidden" name="ADDRESS_OVERRIDE" value="1">
  <input type="hidden" name="HPP_NAME" value="James Mason">
  <input type="hidden" name="HPP_STREET" value="Flat 123">
  <input type="hidden" name="HPP_STREET2" value="House 456">
  <input type="hidden" name="HPP_CITY" value="Chicago">
  <input type="hidden" name="HPP_STATE" value="IL">
  <input type="hidden" name="HPP_ZIP" value="50001">
  <input type="hidden" name="HPP_COUNTRY" value="US">
  <input type="hidden" name="HPP_PHONE" value="015552390">
  <!-- End PayPal Specific Fields-->
  <!-- APMs Mandatory Fields -->
  <input type="hidden" name="HPP_CUSTOMER_FIRSTNAME" value="James">
  <input type="hidden" name="HPP_CUSTOMER_LASTNAME" value="Mason">
  <!-- APMs Mandatory Fields -->
  <!-- APMs Optional Fields -->
  <input type="hidden" name="PM_METHODS" value="paypal">
  <!-- End APMs Optional Fields -->
  <input type="hidden" name="SHA1HASH" value="308bb8dfbbfcc67c28d602d988ab104c3b08d012">
  <input type="submit" value="Click To Paypal">
</form>
<!--<iframe id="targetIframe" style="display:none;width: 100%;height: 100%;"></iframe>-->
</body>
</html>